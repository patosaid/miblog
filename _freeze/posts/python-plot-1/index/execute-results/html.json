{
  "hash": "4dcd97945355aaa101c2686c9c66b05c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'Transforma tus gráficos en Python: Técnicas para cambiar estilos y colores'\nauthor: Patricio Said\ndate: '2021-01-12'\nslug: creando-mapa-para-mostrar-la-zona-de-estudio\ncategories: [\"python\",\"matplotlib\" , \"seaborn\"]\n#image: \"img/martini.jpg\"\ndescription: \"\"\nformat:\n  html:\n    toc: true\ndraft: false\n---\n\n\n\nHace algunos años \n\n\n\n\n\n\n\nEn este post trabajo\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport pandas as pd \nimport matplotlib.pyplot as plt \nimport seaborn as sns\n```\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\nurl_1 = \"https://drive.google.com/file/d/1chBndOfQob4OY2lUsQPoe3bOZUiixjOa/view?usp=sharing\"\npath_1 = 'https://drive.google.com/uc?export=download&id='+url_1.split('/')[-2] \ndf_1 = pd.read_csv(path_1)\ndf_1.head()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n    Paises  Contagiados\n0   España       569457\n1    Chile      1088398\n2   Guinea      1302202\n3  Ecuador      1930001\n4    Rusia      2000091\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\ndf = pd.DataFrame.copy(df_1)\n\nf, ax = plt.subplots()\nsns.barplot(y = \"Paises\" , x = \"Contagiados\" , data = df ,\n            color = \"r\", alpha = .8)\n\nplt.show(ax)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\ndf= df.sort_values(by=[\"Contagiados\"], ascending=False )\ndf[\"Contagiados\"] = df[\"Contagiados\"]/1000000\nx = df_1[\"Contagiados\"].sum()\ndf.head()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     Paises  Contagiados\n19   México    10.327423\n18    Japón    10.248705\n17  Francia     9.776457\n16   Canadá     7.506864\n15    India     7.498847\n```\n\n\n:::\n:::\n\n::: {.cell .column-screen}\n\n```{.python .cell-code}\nplt.rcParams['font.family'] = 'Segoe UI'\n#plt.rcParams['font.sans-serif'] = ['Arial']  # O cualquier fuente que prefieras\n\n# Crear la figura y los ejes\nfig, ax = plt.subplots(figsize=(15, 7), dpi=120) #editar tamaño del plot (está en gran tamaño para html)\n\n# cambiar fondo del plot\n#fig.patch.set_facecolor('#F5F5F5')  # Fondo exterior (alrededor del gráfico)\n#ax.set_facecolor('#F5F5F5')         # Fondo interior del gráfico\n\n# Crear la gráfica de barras\nsns.barplot(\n    y=\"Paises\",\n    x=\"Contagiados\",\n    data=df,\n    color=\"r\",\n    alpha=0.8,\n    ax=ax\n)\n\n# Configurar límites y etiquetas de los ejes\nax.set_xlim(0, 10.4)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n(0.0, 10.4)\n```\n\n\n:::\n\n```{.python .cell-code}\nax.set_xlabel(\"Millones de contagios\", fontsize=14, color='#4D4D4D')\nax.set_ylabel(\"\", fontsize=0)\n\n# Ajustar el tamaño y color de las etiquetas del eje x e y\nax.tick_params(axis='y', labelsize=14, colors='#4D4D4D')\nax.tick_params(axis='x', labelsize=14, colors='#4D4D4D')\n\n\n# Eliminar ehes específicas\nax.spines['top'].set_visible(False)\nax.spines['right'].set_visible(False)\n\n# cambiar de color ejes específicas\nax.spines['bottom'].set_color('#4D4D4D') \nax.spines['left'].set_color('#4D4D4D') \n\n# Añadir etiquetas de valor a cada barra dentro de la barra al final\nfor patch in ax.patches:\n    width = patch.get_width()\n    y = patch.get_y() + patch.get_height() / 2\n    \n    # Convertir el número a string con coma como separador decimal\n    formatted_width = f'{width:.1f}'.replace('.', ',')\n    # Posicionar el texto ligeramente dentro de la barra\n    ax.text(\n        width - 0.1,  # Desplazamiento hacia la izquierda para estar dentro\n        y,\n        f'{formatted_width} M',  # Usar el valor con coma\n        ha='right',  # Alinear el texto a la derecha para que quede al final\n        va='center',\n        color=\"white\",\n        fontweight='bold',\n        fontsize=12\n    )\n\n# Añadir título principal\nplt.suptitle(\n    'Total de contagios por país',\n    y=0.98,\n    horizontalalignment='left',\n    x=0.01,\n    fontsize=24,\n    fontweight=\"bold\",\n    color='#4D4D4D'\n)\n\n# Añadir texto adicional con la suma total de contagiados\nax.text(\n    7, 19,\n    f'Total de contagios: {int(x):,}'.replace(',', '.'),\n    color='grey',\n    fontsize=20,\n    fontweight='bold'\n)\n\n\nplt.tight_layout() #para ajustar el plot opupar el espacio\n\nplt.show()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-3.png){width=1440}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}